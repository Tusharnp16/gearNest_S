<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${title}">Invoice - GearNest</title>
    <link rel="shortcut icon" th:href="@{/images/logo.png}" type="image/x-icon">
    <link rel="stylesheet" th:href="@{/css/invoice.css}" />
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>

<body>
    <div class="invoice-wrapper">
        <header class="invoice-header">
            <div class="logo">
                <img th:src="@{/images/logo.png}" alt="GearNest Logo" class="logo-img">
                <span>GearNest</span>
            </div>
            <div class="invoice-title">
                <h1>INVOICE</h1>
            </div>
        </header>

        <section class="invoice-details">
            <div class="detail-group bill-to">
                <h3>Bill To</h3>
                <p><strong><span th:text="${booking.user.firstName} + ' ' + ${booking.user.lastName}">John
                            Doe</span></strong></p>
                <p><span th:text="${booking.user.address}">123 Auto Street, Car City</span></p>
                <p><span th:text="${booking.user.email}">john.doe@example.com</span></p>
                <p><span th:text="${booking.user.phone}">+91 98765 43210</span></p>
            </div>
            <div class="detail-group garage-details" style="text-align: right;">
                <h3>From</h3>
                <p><strong><span th:text="${booking.garageName}">Surat Premium Motors</span></strong></p>
                <p><span th:text="${booking.garageAddress}">123, Adajan Patiya</span></p>
                <p><span th:text="${booking.garageCity}">Surat, Gujarat, 395009</span></p>
                <p><span th:text="${booking.garageEmail}">contact@spmotors.com</span></p>
            </div>
            <div class="detail-group">
                <h3>Payment Details</h3>
                <p><strong>Booking ID:</strong> <span th:text="${booking.id}">#GNS123456789</span></p>
                <p><strong>Invoice Date:</strong> <span th:text="${booking.invoiceDate}">12 September 2025</span></p>
                <p><strong>Service Date:</strong> <span th:text="${booking.bookingDate}">10 September 2025</span></p>
            </div>
            <div class="detail-group" style="text-align: right;">
                <h3>&nbsp;</h3>
                <p><strong>Payment Method:</strong> <span th:text="${booking.paymentMethod}">VISA **** 1234</span></p>
                <p><strong>Transaction ID:</strong> <span th:text="${booking.transactionId}">12345ABCDE</span></p>
                <p><strong>Status:</strong> <span style="color: #22c55e; font-weight: bold;"
                        th:text="${booking.status}">PAID</span></p>
            </div>
        </section>

        <table class="invoice-table">
            <thead>
                <tr>
                    <th>Service Description</th>
                    <th class="text-right">Qty</th>
                    <th class="text-right">Rate</th>
                    <th class="text-right">Amount</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td th:text="${booking.serviceNames}">General Service</td>
                    <td class="text-right">1</td>
                    <td class="text-right"><span
                            th:text="'₹' + ${#numbers.formatDecimal(booking.serviceSubtotal, 0, 2)}">₹1,499.00</span>
                    </td>
                    <td class="text-right"><span
                            th:text="'₹' + ${#numbers.formatDecimal(booking.serviceSubtotal, 0, 2)}">₹1,499.00</span>
                    </td>
                </tr>
            </tbody>
        </table>

        <section class="invoice-summary-wrapper">
            <div class="summary-table">
                <div class="summary-row">
                    <span>Subtotal</span>
                    <span><span
                            th:text="'₹' + ${#numbers.formatDecimal(booking.serviceSubtotal, 0, 2)}">₹1,499.00</span></span>
                </div>
                <div class="summary-row">
                    <span>Taxes (5%)</span>
                    <span><span th:text="'₹' + ${#numbers.formatDecimal(booking.taxes, 0, 2)}">₹74.95</span></span>
                </div>
                <div class="summary-row">
                    <span>Convenience Fee</span>
                    <span><span
                            th:text="'₹' + ${#numbers.formatDecimal(booking.convenienceFee, 0, 2)}">₹50.00</span></span>
                </div>
                <div class="summary-row total">
                    <span>Total Amount</span>
                    <span><span
                            th:text="'₹' + ${#numbers.formatDecimal(booking.totalAmount, 0, 2)}">₹1,623.95</span></span>
                </div>
            </div>
        </section>

        <footer class="invoice-footer">
            <p><strong>Notes:</strong> All services are covered by a 30-day warranty.</p>
            <p>Thank you for choosing GearNest! We appreciate your business.</p>
        </footer>
    </div>

    <div class="print-button-container">
        <button class="btn btn-primary" onclick="window.print()">Print Invoice</button>
    </div>
</body>

</html>